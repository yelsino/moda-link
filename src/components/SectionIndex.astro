---
import CardIndex from "./CardIndex.astro";
const urlBase = "https://moda-link-api.deno.dev/api/v1/products?";
const params = new URLSearchParams();
params.set("genero", "hombre");
const response = await fetch(urlBase + params);
const products = await response.json();

const { title, inicio, fin, sectionId, background } = Astro.props

---


<div class={`border-b flex flex-col gap-y-3  `}>
  <div class="flex items-center justify-between px-5">
    <h2 class="text-2xl font-semibold">{title}</h2>
    <ul class="flex gap-x-2">
      <li class="border px-1">item1</li>
      <li class="border px-1">item2</li>
      <li class="border px-1">item3</li>
      <li class="border px-1">item4</li>
    </ul>
  </div>
  <astro-greet class={`${background && ""}`} data-message={sectionId}>
    <section id={sectionId} class="grid-container scroll-js px-5">
      {
        products
          .slice(inicio, fin)
          .map((product: any) => (
            <CardIndex
              description={product.descripcion}
              image={product.imagen}
              link={product.url}
              marca={product.marca}
              genero={product.genero}
              likes={product.likes}
              urlAfiliado={product.urlAfiliado}
              precio={product.precio}
              categoria={product.categoria}
              subCategoria={product.subCategoria}
            />
          ))
      }

  </section>
  </astro-greet>
 
  
</div>

<script>
  
  import Conveyer from "@egjs/conveyer";

  class AstroGreet extends HTMLElement {
    constructor() {
      super();
      
      const sectionId = this.dataset.message;
      const formatId = `#${sectionId}`
      new Conveyer(formatId);
    }
  }

  customElements.define('astro-greet', AstroGreet);

</script>


<style>

.grid-container{
    display: grid;
    grid-auto-flow: column;
    overflow-x: scroll;
    grid-template-rows: auto auto;
    gap: 20px
}
.grid-container::-webkit-scrollbar{
  width: 0;
}

.items {
  width: 100px;
  height: 100px;
  border: solid 1px black;
}

</style>


